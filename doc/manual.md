# Первоначальная настройка данных

Перед установкой бота на клиенте необходимо добавить новый объект в файл customers.json, который содержит информацию о всех клиентах.  Файл customers.json расположен на сервере в папке data. Пример объекта:
 ```typescript
 "gs": {
      "name": "ОДО \"Золотые программы\"",
      "aliases": [
        "золотые программы",
        "gs",
	    "golden software"
      ]
    }
```
"gs" - ИД организации,
name - официальное наименование организации,
aliases - возможные варианты наименований организации, которыми могут пользоваться сотрудники.


# Экспорт данных из Гедымина

1. Для выгрузки данных из базы клиента необходимо установить пакет ПИ "ZarobakBot". Он включает в себя:
  - "ZarobakBot.Сбор данных", который содержит макросы для формирования json файлов, содержащих необходимую информацию из базы данных
  - "ZarobakBot.Экспорт файлов", который содержит макросы для передачи информации на сервер

2. Для работы с сервером необходимо заполнить следующие значения констант в справочнике Исследователь » Сервис » Константы:
  - "ZarobakBot. ИД клиента" - это ИД, которое соответствует ИД записи клиента из файла customers.json ("gs", "bmkk" и т.д.);
  - "ZarobakBot. Адрес сервера " - пока https://zarobak.gdmn.app:4444.

3. Запустите макрос из исследователя ZarobakBot » Экспорт данных. Макрос выполнит формирование json файлов:
  - employee.json, который содержит данные по сотрудникам организации
  - accdedref.json, который содержит все виды начислений и удержаний
  - расчетных листков

Данные для экспорта сотрудников вытягиваются за период, который будет запрашиваться параметром.

Макросы экспорта данных состоят из 2 основных частей:
  1. Выполнение запросов и подготовка данных в JSON формате;
  2. Отправка файлов на сервер.

# Рассылка сообщений пользователям о том, что появился новый расчетный листок

После загрузки нового расчетного листка (на post методе 'upload_paySlips') будет выполнена рассылка сообщения о новых данных
всем сотрудникам из файла employee.json соответствующей организации.

Единица выгрузки из базы данных это один расчетный листок, за один целый календарный месяц, по одному сотруднику.

Подразделение и должность определяется на дату окончания
месяца расчетного листка. И всегда передается вместе
с расчетным листком.

Если человек в один месяц работал в одном подразделении,
в другой -- в другом, то у него в каждом расчетном листке
будет сохранено соответствующее подразделение.

Если человек в течение месяца переводился из подразделения в подразделение или с должности на должность, то в расчетный листок попадет только последнее.