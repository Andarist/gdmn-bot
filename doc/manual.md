# Экспорт данных из Гедымина

  Для выгрузки данных из базы клиента было разработано ПИ "БОТ.Экспорт файлов",
которое содержит основные функции:
  1. Экспорт сотрудников;
  2. Экспорт видов начислений;
  3. Экспорт расчетных листов.

  Для работы с сервером необходимо заполнить следующие константы:
  1. БОТ. ИД клиента;
  2. БОТ. Адрес сервера.

  Для специфических данных на базе ВБПФ было создано ПИ "БОТ.Бройлеры",
которое зависит от ПИ "БОТ.Экспорт файлов", и содержит значение константы "БОТ. ИД клиента" = "brl".

  Макросы экспорта данных состоят из 2 основных частей:
  1. Выполнение запросов и подготовка данных в JSON формате;
  2. Отправка файлов на сервер.



Единица выгрузки из базы данных это один расчетный листок, за один целый календарный месяц, по одному сотруднику.

Подразделение и должность определяется на дату окончания
месяца расчетного листка. И всегда передается вместе
с расчетным листком.

Если человек в один месяц работал в одном подразделении,
в другой -- в другом, то у него в каждом расчетном листке
будет сохранено соответствующее подразделение.

Если человек в течение месяца переводился из подразделения в подразделение или с должности на должность, то в расчетный листок попадет только последнее.



## Формат строки данных расчетного листка
Данные по расчетному листку извлекаются всегда за один целый месяц по одному сотруднику. На основании них формируется ОДНА строка следующего формата:
```
V,EID,Y,DN,X
```
# Пример
Данные передаются одной строкой. Ниже мы можем переносить строку для удобства отображения на экране.
```
1,545624_54675,2020,"автотранспортный парк",2,
```
# Описание полей
```
| ID | Note
|----|------
| V  | Номер версии данных. Всегда значение 1.
| EID| employeeId. RUID контакта из Гедымина.
| Y  | Год ??????
| DN | Имя подразделения из бд. Будем считать, что это
|    | имя на русском языке, когда на сервере будем
|    | преобразовывать в структуру LName.
| X  | Количество начислений в расчетном листке.
|    | Сами начисления идут сразу же за полем X.
|    | На каждое начисление передается 4 поля,
|    | описанных ниже.

```